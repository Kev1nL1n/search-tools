{"version":3,"file":"js/964.034450ee.js","mappings":"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","sources":["webpack://tools-ui-new/./src/components/result-entry.vue?11c8","webpack://tools-ui-new/src/components/result-entry.vue","webpack://tools-ui-new/./src/components/result-entry.vue?3f4a","webpack://tools-ui-new/./src/components/result-entry.vue","webpack://tools-ui-new/./src/views/browser/index.vue?a592","webpack://tools-ui-new/src/views/browser/index.vue","webpack://tools-ui-new/./src/views/browser/index.vue?8478","webpack://tools-ui-new/./src/views/browser/index.vue"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"result-entry\"},[_c('span',{ref:\"dest\",staticClass:\"tips-fixed\",on:{\"click\":_vm.showResultList}},[_c('Icon',{attrs:{\"type\":\"md-archive\"}}),_vm._v(\" 打开检索列表 或 拖动超链接到此处 \")],1),_c('Drawer',{attrs:{\"transfer\":false,\"title\":\"检索列表\",\"width\":_vm.width,\"closable\":false},model:{value:(_vm.resultVisible),callback:function ($$v) {_vm.resultVisible=$$v},expression:\"resultVisible\"}},[_c('result-list',{ref:\"result-list\",attrs:{\"show-back\":false}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"result-entry\">\n        <span ref=\"dest\" class=\"tips-fixed\" @click=\"showResultList\">\n            <Icon type=\"md-archive\"/>\n            打开检索列表 或 拖动超链接到此处\n        </span>\n        <Drawer :transfer=\"false\" title=\"检索列表\" :width=\"width\" :closable=\"false\" v-model=\"resultVisible\">\n            <result-list :show-back=\"false\" ref=\"result-list\"/>\n        </Drawer>\n    </div>\n</template>\n\n<script>\n    import ResultList from \"@cmp/result-list\";\n    import StringUtils from \"@js/utils/string-utils\";\n\n    export default {\n        name: \"result-entry\",\n        components: {ResultList},\n        data() {\n            return {\n                resultVisible: false\n            }\n        },\n        computed: {\n            width() {\n                return window.screen.availWidth - 200;\n            }\n        },\n        methods: {\n            showResultList() {\n                this.resultVisible = true;\n                let $ref = this.$refs[\"result-list\"];\n                if ($ref) {\n                    $ref.listResult();\n                }\n            }\n        },\n        mounted() {\n            this.$refs.dest.ondrop = (evt) => {\n                evt.preventDefault();\n                const data = evt.dataTransfer.getData(\"text/plain\");\n                if (StringUtils.isNotBlank(data)) {\n                    try {\n                        let linkData = JSON.parse(data);\n                        electronAPI.invoke({type: 'saveResult', content: linkData}).then(res => {\n                            const {type, content} = res.content;\n                            this.$Message[type]({content});\n                        });\n                    } catch (e) {\n                        debugger\n                        this.$Message.error(\"添加结果列表失败\");\n                    }\n                }\n            }\n\n            document.ondragover = function (evt) {\n                // 取消事件的默认行为\n                return false;\n            }\n            document.ondrop = function (evt) {\n                // 取消事件的默认行为\n                return false;\n            }\n        }\n    }\n</script>\n\n<style scoped lang=\"less\">\n    @import '~view-design/src/styles/index.less';\n\n    .result-entry {\n        .tips-fixed {\n            width: 150px;\n            position: fixed;\n            z-index: 9;\n            background: @primary-color;\n            color: #fff;\n            right: 0;\n            top: 20%;\n            padding: 10px;\n            border-radius: 10px 0 0 10px;\n            cursor: pointer;\n        }\n    }\n</style>\n","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!../../node_modules/iview-loader/index.js??ruleSet[0].use[1]!./result-entry.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!../../node_modules/iview-loader/index.js??ruleSet[0].use[1]!./result-entry.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./result-entry.vue?vue&type=template&id=36e918c0&scoped=true\"\nimport script from \"./result-entry.vue?vue&type=script&lang=js\"\nexport * from \"./result-entry.vue?vue&type=script&lang=js\"\nimport style0 from \"./result-entry.vue?vue&type=style&index=0&id=36e918c0&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"36e918c0\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"browser\"}},[(_vm.isNotIndex)?_c('div',{staticClass:\"navigator\"},[_c('Button',{attrs:{\"icon\":\"md-arrow-back\"},on:{\"click\":_vm.back}},[_vm._v(\"后退\")]),_c('Button',{attrs:{\"icon\":\"md-arrow-forward\"},on:{\"click\":_vm.forward}},[_vm._v(\"前进\")]),_c('Input',{model:{value:(_vm.url),callback:function ($$v) {_vm.url=$$v},expression:\"url\"}}),_c('Button',{attrs:{\"type\":\"primary\",\"icon\":\"md-arrow-forward\"},on:{\"click\":_vm.toUrl}},[_vm._v(\"跳转\")]),_c('Button',{attrs:{\"icon\":\"md-refresh\"},on:{\"click\":_vm.refresh}},[_vm._v(\"刷新\")]),_c('Button',{attrs:{\"type\":\"primary\",\"icon\":\"md-browsers\"},on:{\"click\":_vm.openBrowser}},[_vm._v(\"系统浏览器打开\")])],1):_vm._e(),_c('iframe',{ref:\"iframe\",attrs:{\"src\":\"\"}}),_c('result-entry')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div id=\"browser\">\n        <div class=\"navigator\" v-if=\"isNotIndex\">\n            <Button icon=\"md-arrow-back\" @click=\"back\">后退</Button>\n            <Button icon=\"md-arrow-forward\" @click=\"forward\">前进</Button>\n            <Input v-model=\"url\"/>\n            <Button type=\"primary\" @click=\"toUrl\" icon=\"md-arrow-forward\">跳转</Button>\n            <Button icon=\"md-refresh\" @click=\"refresh\">刷新</Button>\n            <Button type=\"primary\" @click=\"openBrowser\" icon=\"md-browsers\">系统浏览器打开</Button>\n        </div>\n        <iframe ref=\"iframe\" src=\"\"/>\n        <result-entry/>\n    </div>\n</template>\n<script>\n    import StringUtils from \"@js/utils/string-utils\";\n    import ResultEntry from \"@cmp/result-entry\";\n\n    export default {\n        components: {ResultEntry},\n        data() {\n            return {\n                url: null\n            }\n        },\n        mounted() {\n            let query = this.$route.query;\n            if (query.url) {\n                this.url = decodeURIComponent(query.url);\n                this.toUrl();\n            }\n            let iframe = this.$refs.iframe;\n            iframe.onload = null;\n            iframe.onload = function () {\n                iframe.contentDocument.querySelectorAll(\"a\").forEach(a => {\n                    a.ondragstart = function (evt) {\n                        // 将被拖动元素的innerHTML属性值设置成被拖动的数据\n                        evt.dataTransfer.setData(\"text/plain\"\n                            , JSON.stringify({\n                                eng_id: \"custom\",\n                                eng_name: \"自定义链接\",\n                                href: evt.target.href,\n                                title: evt.target.innerText,\n                            }));\n                    }\n                    a.addEventListener(\"click\", () => {\n                        event.stopPropagation();\n                        event.stopImmediatePropagation()\n                        const targets = [\"_blank\", \"_top\", \"_parent\"];\n                        if (!a.target || targets.includes(a.target)) {\n                            event.preventDefault();\n                            electronAPI.invoke({type: \"openWindow\", content: {url: a.href}})\n                        }\n                    })\n                });\n\n                iframe.contentWindow.open = (url) => {\n                    electronAPI.invoke({type: \"openWindow\", content: {url}})\n                }\n            }\n            const timer = setInterval(() => {\n                try {\n                    let href = iframe.contentDocument.location.href;\n                    if (href !== this.url) {\n                        this.url = href;\n                    }\n                    let title = iframe.contentDocument.title;\n                    if (document.title !== title) {\n                        document.title = title;\n                    }\n                } catch (e) {\n                    clearInterval(timer);\n                }\n            }, 100);\n        },\n        computed: {\n            isNotIndex() {\n                return this.$route.path !== \"/\";\n            }\n        },\n        methods: {\n            openBrowser() {\n                electronAPI.invoke({type: \"openBrowser\", content: this.url});\n            },\n            toUrl() {\n                if (!StringUtils.isURL(this.url)) {\n                    this.url = \"http://\" + this.url;\n                }\n                this.$refs.iframe.src = this.url;\n            },\n            refresh() {\n                this.$refs.iframe.contentWindow.location.reload();\n            },\n            back() {\n                this.$refs.iframe.contentWindow.history.back();\n            },\n            forward() {\n                this.$refs.iframe.contentWindow.history.forward();\n            }\n        }\n    }\n</script>\n<style scoped lang=\"less\">\n    @import \"~@style/variables.less\";\n\n    #browser {\n        height: 100%;\n\n        .navigator {\n            display: flex;\n            padding: @padding-size;\n\n            & > * {\n                margin-right: @margin-size;\n            }\n\n            & > *:last-child {\n                margin-right: unset;\n            }\n        }\n\n        iframe {\n            border: unset;\n            width: 100%;\n            height: calc(~\"100% - 52px\");\n        }\n    }\n</style>\n","import mod from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!../../../node_modules/iview-loader/index.js??ruleSet[0].use[1]!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!../../../node_modules/iview-loader/index.js??ruleSet[0].use[1]!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=6f1a717e&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=6f1a717e&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6f1a717e\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","ref","on","showResultList","attrs","_v","width","model","value","callback","$$v","resultVisible","expression","staticRenderFns","name","components","ResultList","data","computed","window","screen","availWidth","methods","$ref","$refs","listResult","mounted","dest","ondrop","evt","preventDefault","dataTransfer","getData","isNotBlank","linkData","JSON","parse","electronAPI","invoke","type","content","then","res","$Message","e","error","document","ondragover","component","back","forward","url","toUrl","refresh","openBrowser","_e","ResultEntry","query","$route","decodeURIComponent","iframe","onload","contentDocument","querySelectorAll","forEach","a","ondragstart","setData","stringify","eng_id","eng_name","href","target","title","innerText","addEventListener","event","stopPropagation","stopImmediatePropagation","targets","includes","contentWindow","open","timer","setInterval","location","clearInterval","isNotIndex","path","isURL","src","reload","history"],"sourceRoot":""}