"use strict";(self["webpackChunktools_ui_new"]=self["webpackChunktools_ui_new"]||[]).push([[639],{871:function(e,t,n){n.d(t,{A:function(){return d}});var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"result-entry"},[t("span",{ref:"dest",staticClass:"tips-fixed",on:{click:e.showResultList}},[t("Icon",{attrs:{type:"md-archive"}}),e._v(" 打开检索列表 或 拖动超链接到此处 ")],1),t("Drawer",{attrs:{transfer:!1,title:"检索列表",width:e.width,closable:!1},model:{value:e.resultVisible,callback:function(t){e.resultVisible=t},expression:"resultVisible"}},[t("result-list",{ref:"result-list",attrs:{"show-back":!1}})],1)],1)},r=[],s=n(87),i=n(283),a={name:"result-entry",components:{ResultList:s.A},data(){return{resultVisible:!1}},computed:{width(){return window.screen.availWidth-200}},methods:{showResultList(){this.resultVisible=!0;let e=this.$refs["result-list"];e&&e.listResult()}},mounted(){this.$refs.dest.ondrop=e=>{e.preventDefault();const t=e.dataTransfer.getData("text/plain");if(i.A.isNotBlank(t))try{let e=JSON.parse(t);electronAPI.invoke({type:"saveResult",content:e}).then((e=>{const{type:t,content:n}=e.content;this.$Message[t]({content:n})}))}catch(n){this.$Message.error("添加结果列表失败")}},document.ondragover=function(e){return!1},document.ondrop=function(e){return!1}}},l=a,c=n(656),u=(0,c.A)(l,o,r,!1,null,"36e918c0",null),d=u.exports},639:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var o=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"search-home"}},[t("div",{staticClass:"options"},[t("Button",{attrs:{icon:"md-arrow-back"},on:{click:e.back}},[e._v("返 回")])],1),t("img",{attrs:{src:"/image/logo.png",alt:"资料检索工具"}}),t("div",{staticClass:"form"},[t("AutoComplete",{attrs:{clearable:"",size:"large",data:e.keywordHistory,"filter-method":e.filterMethod,placeholder:"输入需要搜索的关键字，多个关键字使用[ , ]隔开"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),t("Button",{attrs:{id:"search-btn",icon:"md-search",size:"large",type:"primary"},on:{click:e.goSearch}},[e._v("聚合搜索")])],1),t("div",{staticClass:"history"},e._l(e.keywordHistory,(function(n,o){return o<=49?t("Tag",{key:o,attrs:{closable:"",size:"large"},on:{"on-close":function(t){return e.removeKeywordHistory(n)}},nativeOn:{click:function(t){return e.clickKeywordHistory(n)}}},[e._v(" "+e._s(n)+" ")]):e._e()})),1),t("result-entry")],1)},r=[],s=n(283),i=n(894),a=n(871),l={name:"index",components:{ResultEntry:a.A},data(){return{keyword:null,keywordHistory:[]}},methods:{back(){this.$router.push("/")},filterMethod(e,t){return!s.A.isBlank(e)&&!s.A.isBlank(t)&&-1!==t.toUpperCase().indexOf(e.toUpperCase())},goSearch(){(0,i.ig)(this.keyword),s.A.isURL(this.keyword)?(this.keywordHistory=(0,i.FA)(),electronAPI.invoke({type:"openWindow",content:{url:this.keyword}})):this.$router.push({path:"engine",query:{t:(new Date).getTime(),keyword:this.keyword}})},removeKeywordHistory(e){this.keywordHistory=(0,i.FN)(e)},clickKeywordHistory(e){this.keyword=e,this.goSearch()}},created(){this.keywordHistory=(0,i.FA)(),document.addEventListener("keydown",(e=>{13===e.keyCode&&(e.preventDefault(),this.goSearch())}))}},c=l,u=n(656),d=(0,u.A)(c,o,r,!1,null,"d118f4b6",null),_=d.exports},894:function(e,t,n){n.d(t,{FA:function(){return c},FN:function(){return l},ig:function(){return a}});var o=n(761),r=n(283);const s="kw_his",i=200;function a(e){if(r.A.isBlank(e))return;let t=c();t.length>i&&t.splice(0,i/2);let n=t.findIndex((t=>t===e));-1!==n&&t.splice(n,1),t.unshift(e),(0,o.k3)({name:s,content:t})}function l(e){let t=(0,o.KA)({name:s})||[],n=t.findIndex((t=>t===e));return-1!==n&&t.splice(n,1),(0,o.k3)({name:s,content:t}),t}function c(){return(0,o.KA)({name:s})||[]}},761:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{KA:function(){return getStore},k3:function(){return setStore}});var _string_utils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(283);const keyName="tools-",setStore=(e={})=>{let{name:t,content:n,type:o}=e;t=keyName+t;let r={dataType:typeof n,content:n,type:o,datetime:(new Date).getTime()};o?window.sessionStorage.setItem(t,JSON.stringify(r)):window.localStorage.setItem(t,JSON.stringify(r))},getStore=(params={})=>{let{name:name,debug:debug}=params,obj,content;if(name=keyName+name,obj=window.sessionStorage.getItem(name),_string_utils_js__WEBPACK_IMPORTED_MODULE_0__.A.isBlank(obj)&&(obj=window.localStorage.getItem(name)),!_string_utils_js__WEBPACK_IMPORTED_MODULE_0__.A.isBlank(obj)){try{obj=JSON.parse(obj)}catch(ignored){return obj}return debug?obj:("string"===obj.dataType?content=obj.content:"number"===obj.dataType?content=Number(obj.content):"boolean"===obj.dataType?content=eval(obj.content):"object"===obj.dataType&&(content=obj.content),content)}},removeStore=(e={})=>{let{name:t,type:n}=e;t=keyName+t,n?window.sessionStorage.removeItem(t):window.localStorage.removeItem(t)},getAllStore=(e={})=>{let t=[],{type:n}=e;if(n)for(let o=0;o<=window.sessionStorage.length;o++)t.push({name:window.sessionStorage.key(o),content:getStore({name:window.sessionStorage.key(o),type:"session"})});else for(let o=0;o<=window.localStorage.length;o++)t.push({name:window.localStorage.key(o),content:getStore({name:window.localStorage.key(o)})});return t},clearStore=(e={})=>{let{type:t}=e;t?window.sessionStorage.clear():window.localStorage.clear()}}}]);
//# sourceMappingURL=639.bcb76c3f.js.map