{"version":3,"file":"js/430.d8420601.js","mappings":"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","sources":["webpack://tools-ui-new/./src/components/result-entry.vue?11c8","webpack://tools-ui-new/src/components/result-entry.vue","webpack://tools-ui-new/./src/components/result-entry.vue?3f4a","webpack://tools-ui-new/./src/components/result-entry.vue","webpack://tools-ui-new/./src/views/search/engine.vue?3df0","webpack://tools-ui-new/src/views/search/engine.vue","webpack://tools-ui-new/./src/views/search/engine.vue?b204","webpack://tools-ui-new/./src/views/search/engine.vue","webpack://tools-ui-new/./src/assets/js/utils/search-utils.js","webpack://tools-ui-new/./src/assets/js/utils/store-utils.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"result-entry\"},[_c('span',{ref:\"dest\",staticClass:\"tips-fixed\",on:{\"click\":_vm.showResultList}},[_c('Icon',{attrs:{\"type\":\"md-archive\"}}),_vm._v(\" 打开检索列表 或 拖动超链接到此处 \")],1),_c('Drawer',{attrs:{\"transfer\":false,\"title\":\"检索列表\",\"width\":_vm.width,\"closable\":false},model:{value:(_vm.resultVisible),callback:function ($$v) {_vm.resultVisible=$$v},expression:\"resultVisible\"}},[_c('result-list',{ref:\"result-list\",attrs:{\"show-back\":false}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"result-entry\">\n        <span ref=\"dest\" class=\"tips-fixed\" @click=\"showResultList\">\n            <Icon type=\"md-archive\"/>\n            打开检索列表 或 拖动超链接到此处\n        </span>\n        <Drawer :transfer=\"false\" title=\"检索列表\" :width=\"width\" :closable=\"false\" v-model=\"resultVisible\">\n            <result-list :show-back=\"false\" ref=\"result-list\"/>\n        </Drawer>\n    </div>\n</template>\n\n<script>\n    import ResultList from \"@cmp/result-list\";\n    import StringUtils from \"@js/utils/string-utils\";\n\n    export default {\n        name: \"result-entry\",\n        components: {ResultList},\n        data() {\n            return {\n                resultVisible: false\n            }\n        },\n        computed: {\n            width() {\n                return window.screen.availWidth - 200;\n            }\n        },\n        methods: {\n            showResultList() {\n                this.resultVisible = true;\n                let $ref = this.$refs[\"result-list\"];\n                if ($ref) {\n                    $ref.listResult();\n                }\n            }\n        },\n        mounted() {\n            this.$refs.dest.ondrop = (evt) => {\n                evt.preventDefault();\n                const data = evt.dataTransfer.getData(\"text/plain\");\n                if (StringUtils.isNotBlank(data)) {\n                    try {\n                        let linkData = JSON.parse(data);\n                        electronAPI.invoke({type: 'saveResult', content: linkData}).then(res => {\n                            const {type, content} = res.content;\n                            this.$Message[type]({content});\n                        });\n                    } catch (e) {\n                        debugger\n                        this.$Message.error(\"添加结果列表失败\");\n                    }\n                }\n            }\n\n            document.ondragover = function (evt) {\n                // 取消事件的默认行为\n                return false;\n            }\n            document.ondrop = function (evt) {\n                // 取消事件的默认行为\n                return false;\n            }\n        }\n    }\n</script>\n\n<style scoped lang=\"less\">\n    @import '~view-design/src/styles/index.less';\n\n    .result-entry {\n        .tips-fixed {\n            width: 150px;\n            position: fixed;\n            z-index: 9;\n            background: @primary-color;\n            color: #fff;\n            right: 0;\n            top: 20%;\n            padding: 10px;\n            border-radius: 10px 0 0 10px;\n            cursor: pointer;\n        }\n    }\n</style>\n","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!../../node_modules/iview-loader/index.js??ruleSet[0].use[1]!./result-entry.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!../../node_modules/iview-loader/index.js??ruleSet[0].use[1]!./result-entry.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./result-entry.vue?vue&type=template&id=36e918c0&scoped=true\"\nimport script from \"./result-entry.vue?vue&type=script&lang=js\"\nexport * from \"./result-entry.vue?vue&type=script&lang=js\"\nimport style0 from \"./result-entry.vue?vue&type=style&index=0&id=36e918c0&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"36e918c0\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"search-engine\"}},[_c('div',{attrs:{\"id\":\"options\"}},[_c('Button',{attrs:{\"icon\":\"md-arrow-back\"},on:{\"click\":_vm.back}},[_vm._v(\"返 回\")]),_c('Select',{staticStyle:{\"width\":\"110px\"},on:{\"on-change\":_vm.engineLenChange},model:{value:(_vm.engineLen),callback:function ($$v) {_vm.engineLen=$$v},expression:\"engineLen\"}},_vm._l((_vm.maxEngineLen),function(num){return _c('Option',{key:num,attrs:{\"value\":num}},[_vm._v(_vm._s(num)+\" 个引擎\")])}),1),_c('div',{staticClass:\"engine-select\"},_vm._l((_vm.engineLen),function(num){return _c('div',{staticClass:\"engine\"},[_c('Select',{staticStyle:{\"width\":\"110px\"},on:{\"on-change\":_vm.engineSelectChange},model:{value:(_vm.engineSelect[num]),callback:function ($$v) {_vm.$set(_vm.engineSelect, num, $$v)},expression:\"engineSelect[num]\"}},_vm._l((_vm.engines),function(engine,index){return _c('Option',{key:`${num}-${index}`,attrs:{\"value\":engine.id}},[_vm._v(\" \"+_vm._s(engine.name)+\" \")])}),1)],1)}),0),_c('div',{staticClass:\"form\"},[_c('AutoComplete',{attrs:{\"clearable\":\"\",\"data\":_vm.keywordHistory,\"filter-method\":_vm.filterMethod,\"placeholder\":\"输入需要搜索的关键字，多个关键字使用[ , ]隔开\"},model:{value:(_vm.keyword),callback:function ($$v) {_vm.keyword=$$v},expression:\"keyword\"}}),_c('Button',{staticClass:\"search-btn\",attrs:{\"icon\":\"md-search\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onSearchClick(true)}}},[_vm._v(\"搜 索\")]),(_vm.isMultiKeywords)?_c('Button',{staticClass:\"search-btn\",attrs:{\"icon\":\"md-search\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onSearchClick(false)}}},[_vm._v(\" 搜索第\"+_vm._s(_vm.keywordIndex + 1)+\"个 \")]):_vm._e()],1),(_vm.page > 1)?_c('Button',{attrs:{\"type\":\"text\"},on:{\"click\":_vm.prevPage}},[_vm._v(\"上一页\")]):_vm._e(),_c('Button',{attrs:{\"type\":\"text\"},on:{\"click\":_vm.nextPage}},[_vm._v(\"下一页\")])],1),_c('div',{attrs:{\"id\":\"content\"}},_vm._l((_vm.engineLen),function(num,index){return _c('iframe',{key:index,ref:`iframe-${_vm.engineSelect[num]}`,refInFor:true,attrs:{\"height\":\"100%\",\"width\":\"100%\",\"src\":_vm.getEngine(_vm.engineSelect[num]).home}})}),0),_c('result-entry')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div id=\"search-engine\">\n        <div id=\"options\">\n            <Button icon=\"md-arrow-back\" @click=\"back\">返 回</Button>\n            <Select v-model=\"engineLen\" @on-change=\"engineLenChange\" style=\"width:110px\">\n                <Option v-for=\"num in maxEngineLen\" :value=\"num\" :key=\"num\">{{ num }} 个引擎</Option>\n            </Select>\n            <div class=\"engine-select\">\n                <div class=\"engine\" v-for=\"num in engineLen\">\n                    <Select v-model=\"engineSelect[num]\" @on-change=\"engineSelectChange\" style=\"width:110px\">\n                        <Option v-for=\"(engine, index) in engines\"\n                                :value=\"engine.id\"\n                                :key=\"`${num}-${index}`\">\n                            {{ engine.name }}\n                        </Option>\n                    </Select>\n                </div>\n            </div>\n            <!--<i-select v-model=\"pageSize\" @on-change=\"pageSizeChange\" style=\"width:110px\">\n                <i-option v-for=\"size in sizeSelect\" :value=\"size\" :key=\"size\">{{size}}</i-option>\n            </i-select>-->\n            <div class=\"form\">\n                <AutoComplete\n                    clearable\n                    v-model=\"keyword\"\n                    :data=\"keywordHistory\"\n                    :filter-method=\"filterMethod\"\n                    placeholder=\"输入需要搜索的关键字，多个关键字使用[ , ]隔开\">\n                </AutoComplete>\n                <Button class=\"search-btn\" icon=\"md-search\" type=\"primary\" @click=\"onSearchClick(true)\">搜 索</Button>\n                <Button class=\"search-btn\" v-if=\"isMultiKeywords\" icon=\"md-search\" type=\"primary\"\n                        @click=\"onSearchClick(false)\">\n                    搜索第{{keywordIndex + 1}}个\n                </Button>\n            </div>\n            <Button type=\"text\" @click=\"prevPage\" v-if=\"page > 1\">上一页</Button>\n            <Button type=\"text\" @click=\"nextPage\">下一页</Button>\n        </div>\n        <div id=\"content\">\n            <iframe v-for=\"(num, index) in engineLen\"\n                    height=\"100%\"\n                    width=\"100%\"\n                    :key=\"index\"\n                    :ref=\"`iframe-${engineSelect[num]}`\"\n                    :src=\"getEngine(engineSelect[num]).home\"></iframe>\n        </div>\n        <result-entry/>\n    </div>\n</template>\n\n<script>\n    import engines from \"@js/engines\";\n    import StringUtils from \"@js/utils/string-utils\";\n    import {getStore, setStore} from \"@js/utils/store-utils\";\n    import {getSearchHistory, saveSearchHistory} from \"@js/utils/search-utils\";\n    import ResultEntry from \"@cmp/result-entry\";\n\n    function getQueryParams() {\n        const queryString = window.location.search;\n        const urlParams = new URLSearchParams(queryString);\n        return Object.fromEntries(urlParams.entries());\n    }\n\n    function syncRequestCSS(url) {\n        const xhr = new XMLHttpRequest();\n        xhr.open('GET', url, false); // 第三个参数设置为false表示同步请求\n        xhr.send(null);\n\n        if (xhr.status === 200) {\n            return xhr.responseText; // 返回CSS文件的内容\n        } else {\n            throw new Error('Failed to load CSS file: ' + xhr.status);\n        }\n    }\n\n    const injectCss = syncRequestCSS(\"/style/inject.css\");\n\n    export default {\n        name: \"engine\",\n        components: {ResultEntry},\n        data() {\n            return {\n                signalMode: true,\n                keywordIndex: 0,\n                keywordHistory: [],\n                isInit: false,\n                page: 1,\n                pageSize: 10,\n                sizeSelect: [10, 20, 30, 50, 100],\n                keyword: null,\n                maxEngineLen: engines.length,\n                engineSelect: {\n                    1: engines[0].id,\n                    2: engines[0].id,\n                    3: engines[0].id\n                },\n                engineLen: 1,\n                engines\n            }\n        },\n        computed: {\n            isMultiKeywords() {\n                return this.keyword.split(\",\").length > 1\n            }\n        },\n        methods: {\n            onSearchClick(signalMode) {\n                if ((this.signalMode = signalMode)) {\n                    this.keywordIndex = 0;\n                }\n                this.engineSearch();\n            },\n            filterMethod(value, option) {\n                if (StringUtils.isBlank(value) || StringUtils.isBlank(option)) {\n                    return false;\n                }\n                return option.toUpperCase().indexOf(value.toUpperCase()) !== -1;\n            },\n            engineLenChange(value) {\n                setStore({name: \"engine_len\", content: value});\n                this.engineSearch();\n            },\n            pageSizeChange(value) {\n                setStore({name: \"page_size\", content: value});\n                this.engineSearch();\n            },\n            engineSelectChange(value) {\n                setStore({name: \"engine_select\", content: this.engineSelect});\n                this.engineSearch();\n            },\n            prevPage() {\n                if ((this.page -= 1) < 1) {\n                    this.page = 1;\n                }\n                this.$nextTick(this.engineSearch);\n            },\n            nextPage() {\n                this.page += 1;\n                this.$nextTick(this.engineSearch);\n            },\n            getEngine(id) {\n                return this.engines.find(eng => eng.id === id);\n            },\n            back() {\n                this.$router.push(\"/search/index\")\n            },\n            engineSearch() {\n                let {keyword, page, pageSize, engineLen, engineSelect} = this;\n                if (StringUtils.isBlank(keyword)) {\n                    return;\n                }\n                saveSearchHistory(keyword);\n                this.$nextTick(() => {\n                    if (!this.signalMode) {\n                        let keywords = keyword.split(\",\");\n                        keyword = keywords[this.keywordIndex];\n                        if ((this.keywordIndex += 1) > keywords.length - 1) {\n                            this.keywordIndex = 0;\n                        }\n                    }\n                    //编码\n                    keyword = encodeURIComponent(keyword);\n                    for (let num = 1; num <= engineLen; num++) {\n                        let engine = this.getEngine(engineSelect[num]);\n                        if (!engine) {\n                            continue;\n                        }\n                        //向引擎注入代码\n                        let iframe = this.inject2Engine(engine);\n                        if (iframe) {\n                            iframe.src = `${engine.getSearchURI(keyword, page, pageSize)}`;\n                        }\n                    }\n                })\n            },\n            getIframe(id) {\n                let iframe = this.$refs[`iframe-${id}`];\n                if (!iframe || iframe.length === 0) {\n                    return null\n                } else {\n                    return iframe[0];\n                }\n            },\n            show: function () {\n                this.visible = true;\n            },\n            inject2Engine(engine) {\n                const _this = this;\n                let iframe = this.getIframe(engine.id);\n                if (iframe) {\n                    iframe.onload = null;\n                    iframe.onload = function () {\n                        // 确保iframe加载完成\n                        const doc = iframe.contentDocument || iframe.contentWindow.document;\n                        // 创建新的style元素\n                        const style = doc.createElement('style');\n                        // 设置CSS样式\n                        style.type = 'text/css';\n                        style.innerHTML = injectCss;\n                        // 将style元素添加到iframe的head中\n                        const head = doc.getElementsByTagName('head')[0];\n                        head.appendChild(style);\n                        let resultList = engine.getResultElement(doc);\n                        resultList.forEach(result => {\n                            // 在iframe的body末尾插入一个按钮\n                            const button = doc.createElement('button');\n                            button.classList.add(\"ivu-btn\");\n                            button.classList.add(\"ivu-btn-primary\");\n                            button.innerHTML = '<span>添加链接到数据库</span>';\n                            button.addEventListener(\"click\", (event) => {\n                                _this.sendLinkData2IPC(engine.getLinkData(event.target.parentNode.parentNode));\n                            });\n                            result.insertBefore(button, result.children[0]);\n                        });\n\n                        doc.querySelectorAll(\"a\").forEach(a => {\n                            a.ondragstart = function (evt) {\n                                // 将被拖动元素的innerHTML属性值设置成被拖动的数据\n                                evt.dataTransfer.setData(\"text/plain\"\n                                    , JSON.stringify({\n                                        eng_id: engine.id,\n                                        eng_name: engine.name,\n                                        href: evt.target.href,\n                                        title: evt.target.innerText,\n                                    }));\n                            }\n                            a.addEventListener(\"click\", () => {\n                                event.stopPropagation();\n                                event.stopImmediatePropagation()\n                                const targets = [\"_blank\", \"_top\", \"_parent\"];\n                                if (!a.target || targets.includes(a.target)) {\n                                    event.preventDefault();\n                                    electronAPI.invoke({type: \"openWindow\", content: {url: a.href}})\n                                }\n                            })\n                        });\n\n                        iframe.contentWindow.open = (url) => {\n                            electronAPI.invoke({type: \"openWindow\", content: {url}})\n                        }\n                    }\n                }\n                return iframe;\n            },\n            /**\n             * 链接数据到IPC\n             * @param linkData {Object}\n             */\n            async sendLinkData2IPC(linkData) {\n                electronAPI.invoke({type: 'saveResult', content: linkData}).then(res => {\n                    const {type, content} = res.content;\n                    this.$Message[type]({content});\n                });\n            }\n        },\n        created() {\n            let engineSelect = getStore({name: \"engine_select\"});\n            if (engineSelect) {\n                this.engineSelect = engineSelect;\n            }\n            let engineLen = getStore({name: \"engine_len\"});\n            if (engineLen) {\n                this.engineLen = engineLen;\n            }\n            let pageSize = getStore({name: \"page_size\"});\n            if (pageSize) {\n                this.pageSize = pageSize;\n            }\n            let params = getQueryParams();\n            if (params.hasOwnProperty(\"keyword\")) {\n                if (StringUtils.isNotBlank((this.keyword = params.keyword))) {\n                    this.$nextTick(() => {\n                        this.engineSearch();\n                    })\n                }\n            } else {\n                this.engineSearch();\n            }\n            this.keywordHistory = getSearchHistory();\n\n            document.addEventListener('keydown', (event) => {\n                if (event.keyCode === 13) {\n                    // 执行回车键按下后的操作\n                    event.preventDefault();\n                    this.engineSearch();\n                }\n            });\n        }\n    }\n\n    /*\n    // 选择要观察的元素\n    const targetNode = document.getElementById('container');\n\n    // 观察器的配置（需要观察什么变动）\n    const config = {attributes: true, childList: true, subtree: true};\n\n    // 当观察到变动时执行的回调函数\n    const callback = function (mutationsList, observer) {\n        // 遍历所有变动\n        for (const mutation of mutationsList) {\n            // 如果是属性变动\n            if (mutation.type === 'attributes') {\n                console.log('The ' + mutation.attributeName + ' attribute was modified.');\n            }\n            // 如果是子节点或子树变动\n            else if (mutation.type === 'childList') {\n                console.log('A child node has been added or removed.');\n            }\n        }\n    };\n\n    // 创建一个观察器实例并传入回调函数\n    const observer = new MutationObserver(callback);\n\n    // 以上面的配置开始观察目标节点\n    observer.observe(targetNode, config);\n\n    // 之后，可停止观察\n    observer.disconnect();*/\n</script>\n\n<style scoped lang=\"less\">\n    @import \"~@style/variables.less\";\n    @import '~view-design/src/styles/index.less';\n\n    #search-engine {\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n\n        #content {\n            height: 100%;\n            width: 100%;\n            display: flex;\n\n            iframe {\n                border-top-width: 0;\n                border-bottom-width: 0;\n                border-left-width: 0;\n                border-right-width: 0;\n            }\n        }\n\n        #options {\n            padding: @padding-size;\n            display: flex;\n            position: relative;\n\n            &:after {\n                content: \"\";\n                position: absolute;\n                background: @border-color-base;\n                bottom: 0;\n                z-index: 9;\n                width: 100%;\n                height: 1px;\n                left: 0;\n            }\n\n            & > * {\n                margin-right: @margin-size;\n            }\n\n            .engine-select {\n                display: flex;\n\n                .engine {\n                    margin-right: @margin-size;\n                }\n\n                .engine:last-child {\n                    margin-right: unset;\n                }\n            }\n\n            .form {\n                width: 100%;\n                display: flex;\n                text-align: left;\n            }\n        }\n\n        .search-btn {\n            margin-left: @margin-size;\n        }\n    }\n</style>\n","import mod from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!../../../node_modules/iview-loader/index.js??ruleSet[0].use[1]!./engine.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!../../../node_modules/iview-loader/index.js??ruleSet[0].use[1]!./engine.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./engine.vue?vue&type=template&id=60377c34&scoped=true\"\nimport script from \"./engine.vue?vue&type=script&lang=js\"\nexport * from \"./engine.vue?vue&type=script&lang=js\"\nimport style0 from \"./engine.vue?vue&type=style&index=0&id=60377c34&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"60377c34\",\n  null\n  \n)\n\nexport default component.exports","import {getStore, setStore} from \"./store-utils.js\";\nimport StringUtils from \"./string-utils.js\";\n\nconst key = \"kw_his\";\nconst maxLen = 200;\n\nexport function saveSearchHistory(keyword) {\n    if (StringUtils.isBlank(keyword)) {\n        return;\n    }\n    let keywordHistory = getSearchHistory();\n    if (keywordHistory.length > maxLen) {\n        keywordHistory.splice(0, maxLen / 2);\n    }\n    let findIndex = keywordHistory.findIndex(kw => kw === keyword);\n    if (findIndex !== -1) {\n        keywordHistory.splice(findIndex, 1);\n    }\n    keywordHistory.unshift(keyword);\n    setStore({name: key, content: keywordHistory});\n}\n\nexport function removeSearchHistory(keyword) {\n    let keywordHistory = getStore({name: key}) || [];\n    let findIndex = keywordHistory.findIndex(kw => kw === keyword);\n    if (findIndex !== -1) {\n        keywordHistory.splice(findIndex, 1);\n    }\n    setStore({name: key, content: keywordHistory});\n    return keywordHistory;\n}\n\nexport function getSearchHistory() {\n    return getStore({name: key}) || [];\n}\n","import StringUtils from \"./string-utils.js\";\n\nconst keyName = 'tools-';\n/**\n * 存储localStorage\n */\nexport const setStore = (params = {}) => {\n    let {\n        name,\n        content,\n        type,\n    } = params;\n    name = keyName + name\n    let obj = {\n        dataType: typeof (content),\n        content: content,\n        type: type,\n        datetime: new Date().getTime()\n    }\n    if (type) window.sessionStorage.setItem(name, JSON.stringify(obj));\n    else window.localStorage.setItem(name, JSON.stringify(obj));\n}\n/**\n * 获取localStorage\n */\n\nexport const getStore = (params = {}) => {\n    let {\n        name,\n        debug\n    } = params;\n    name = keyName + name\n    let obj,\n        content;\n    obj = window.sessionStorage.getItem(name);\n    if (StringUtils.isBlank(obj)) obj = window.localStorage.getItem(name);\n    if (StringUtils.isBlank(obj)) return;\n    try {\n        obj = JSON.parse(obj);\n    } catch (ignored) {\n        return obj;\n    }\n    if (debug) {\n        return obj;\n    }\n    if (obj.dataType === 'string') {\n        content = obj.content;\n    } else if (obj.dataType === 'number') {\n        content = Number(obj.content);\n    } else if (obj.dataType === 'boolean') {\n        content = eval(obj.content);\n    } else if (obj.dataType === 'object') {\n        content = obj.content;\n    }\n    return content;\n}\n/**\n * 删除localStorage\n */\nexport const removeStore = (params = {}) => {\n    let {\n        name,\n        type\n    } = params;\n    name = keyName + name\n    if (type) {\n        window.sessionStorage.removeItem(name);\n    } else {\n        window.localStorage.removeItem(name);\n    }\n\n}\n\n/**\n * 获取全部localStorage\n */\nexport const getAllStore = (params = {}) => {\n    let list = [];\n    let {\n        type\n    } = params;\n    if (type) {\n        for (let i = 0; i <= window.sessionStorage.length; i++) {\n            list.push({\n                name: window.sessionStorage.key(i),\n                content: getStore({\n                    name: window.sessionStorage.key(i),\n                    type: 'session'\n                })\n            })\n        }\n    } else {\n        for (let i = 0; i <= window.localStorage.length; i++) {\n            list.push({\n                name: window.localStorage.key(i),\n                content: getStore({\n                    name: window.localStorage.key(i),\n                })\n            })\n\n        }\n    }\n    return list;\n\n}\n\n/**\n * 清空全部localStorage\n */\nexport const clearStore = (params = {}) => {\n    let {type} = params;\n    if (type) {\n        window.sessionStorage.clear();\n    } else {\n        window.localStorage.clear()\n    }\n}\n"],"names":["render","_vm","this","_c","_self","staticClass","ref","on","showResultList","attrs","_v","width","model","value","callback","$$v","resultVisible","expression","staticRenderFns","name","components","ResultList","data","computed","window","screen","availWidth","methods","$ref","$refs","listResult","mounted","dest","ondrop","evt","preventDefault","dataTransfer","getData","isNotBlank","linkData","JSON","parse","electronAPI","invoke","type","content","then","res","$Message","e","error","document","ondragover","component","back","staticStyle","engineLenChange","engineLen","_l","num","key","_s","engineSelectChange","engineSelect","$set","engine","index","id","keywordHistory","filterMethod","keyword","$event","onSearchClick","keywordIndex","_e","page","prevPage","nextPage","refInFor","getEngine","home","getQueryParams","queryString","location","search","urlParams","URLSearchParams","Object","fromEntries","entries","syncRequestCSS","url","xhr","XMLHttpRequest","open","send","status","responseText","Error","injectCss","ResultEntry","signalMode","isInit","pageSize","sizeSelect","maxEngineLen","engines","length","isMultiKeywords","split","engineSearch","option","isBlank","toUpperCase","indexOf","pageSizeChange","$nextTick","find","eng","$router","push","keywords","encodeURIComponent","iframe","inject2Engine","src","getSearchURI","getIframe","show","visible","_this","onload","doc","contentDocument","contentWindow","style","createElement","innerHTML","head","getElementsByTagName","appendChild","resultList","getResultElement","forEach","result","button","classList","add","addEventListener","event","sendLinkData2IPC","getLinkData","target","parentNode","insertBefore","children","querySelectorAll","a","ondragstart","setData","stringify","eng_id","eng_name","href","title","innerText","stopPropagation","stopImmediatePropagation","targets","includes","created","params","hasOwnProperty","keyCode","maxLen","saveSearchHistory","getSearchHistory","splice","findIndex","kw","unshift","removeSearchHistory","keyName","setStore","obj","dataType","datetime","Date","getTime","sessionStorage","setItem","localStorage","getStore","debug","getItem","ignored","Number","eval","removeStore","removeItem","getAllStore","list","i","clearStore","clear"],"sourceRoot":""}