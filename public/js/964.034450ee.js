"use strict";(self["webpackChunktools_ui_new"]=self["webpackChunktools_ui_new"]||[]).push([[964],{871:function(t,e,r){r.d(e,{A:function(){return d}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"result-entry"},[e("span",{ref:"dest",staticClass:"tips-fixed",on:{click:t.showResultList}},[e("Icon",{attrs:{type:"md-archive"}}),t._v(" 打开检索列表 或 拖动超链接到此处 ")],1),e("Drawer",{attrs:{transfer:!1,title:"检索列表",width:t.width,closable:!1},model:{value:t.resultVisible,callback:function(e){t.resultVisible=e},expression:"resultVisible"}},[e("result-list",{ref:"result-list",attrs:{"show-back":!1}})],1)],1)},o=[],s=r(87),i=r(283),l={name:"result-entry",components:{ResultList:s.A},data(){return{resultVisible:!1}},computed:{width(){return window.screen.availWidth-200}},methods:{showResultList(){this.resultVisible=!0;let t=this.$refs["result-list"];t&&t.listResult()}},mounted(){this.$refs.dest.ondrop=t=>{t.preventDefault();const e=t.dataTransfer.getData("text/plain");if(i.A.isNotBlank(e))try{let t=JSON.parse(e);electronAPI.invoke({type:"saveResult",content:t}).then((t=>{const{type:e,content:r}=t.content;this.$Message[e]({content:r})}))}catch(r){this.$Message.error("添加结果列表失败")}},document.ondragover=function(t){return!1},document.ondrop=function(t){return!1}}},a=l,c=r(656),u=(0,c.A)(a,n,o,!1,null,"36e918c0",null),d=u.exports},964:function(t,e,r){r.r(e),r.d(e,{default:function(){return d}});var n=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"browser"}},[t.isNotIndex?e("div",{staticClass:"navigator"},[e("Button",{attrs:{icon:"md-arrow-back"},on:{click:t.back}},[t._v("后退")]),e("Button",{attrs:{icon:"md-arrow-forward"},on:{click:t.forward}},[t._v("前进")]),e("Input",{model:{value:t.url,callback:function(e){t.url=e},expression:"url"}}),e("Button",{attrs:{type:"primary",icon:"md-arrow-forward"},on:{click:t.toUrl}},[t._v("跳转")]),e("Button",{attrs:{icon:"md-refresh"},on:{click:t.refresh}},[t._v("刷新")]),e("Button",{attrs:{type:"primary",icon:"md-browsers"},on:{click:t.openBrowser}},[t._v("系统浏览器打开")])],1):t._e(),e("iframe",{ref:"iframe",attrs:{src:""}}),e("result-entry")],1)},o=[],s=r(283),i=r(871),l={components:{ResultEntry:i.A},data(){return{url:null}},mounted(){let t=this.$route.query;t.url&&(this.url=decodeURIComponent(t.url),this.toUrl());let e=this.$refs.iframe;e.onload=null,e.onload=function(){e.contentDocument.querySelectorAll("a").forEach((t=>{t.ondragstart=function(t){t.dataTransfer.setData("text/plain",JSON.stringify({eng_id:"custom",eng_name:"自定义链接",href:t.target.href,title:t.target.innerText}))},t.addEventListener("click",(()=>{event.stopPropagation(),event.stopImmediatePropagation();const e=["_blank","_top","_parent"];t.target&&!e.includes(t.target)||(event.preventDefault(),electronAPI.invoke({type:"openWindow",content:{url:t.href}}))}))})),e.contentWindow.open=t=>{electronAPI.invoke({type:"openWindow",content:{url:t}})}};const r=setInterval((()=>{try{let t=e.contentDocument.location.href;t!==this.url&&(this.url=t);let r=e.contentDocument.title;document.title!==r&&(document.title=r)}catch(t){clearInterval(r)}}),100)},computed:{isNotIndex(){return"/"!==this.$route.path}},methods:{openBrowser(){electronAPI.invoke({type:"openBrowser",content:this.url})},toUrl(){s.A.isURL(this.url)||(this.url="http://"+this.url),this.$refs.iframe.src=this.url},refresh(){this.$refs.iframe.contentWindow.location.reload()},back(){this.$refs.iframe.contentWindow.history.back()},forward(){this.$refs.iframe.contentWindow.history.forward()}}},a=l,c=r(656),u=(0,c.A)(a,n,o,!1,null,"6f1a717e",null),d=u.exports}}]);
//# sourceMappingURL=964.034450ee.js.map